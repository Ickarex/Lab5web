# AppVeyor configuration for Python Flask app
version: 1.0.{build}
image: Visual Studio 2019  # или Ubuntu если хотите Linux

# Устанавливаем Python
install:
  - ps: if ($isWindows) { Install-Product Python 3.9 x64 }
  # Или для более новой версии Python
  # - ps: if ($isWindows) { Install-Product Python 3.11 x64 }
  
  # Обновляем pip
  - python -m pip install --upgrade pip
  
  # Устанавливаем зависимости
  - pip install flask

# Секция сборки - переходим в режим Script
build_script:
  - echo "Build script mode"
  # Можете добавить команды сборки если они есть
  # - python setup.py build

# Тестирование/запуск
test_script:
  - echo "Running tests..."
  - python --version
  - pip --version
  # Запускаем ваш Flask app в фоновом режиме для тестов
  # или просто проверяем что он запускается
  - python ./flaskapp/some_app.py &
  # Или лучше проверьте импорты и базовую функциональность:
  - python -c "from flaskapp.some_app import app; print('Flask app imported successfully')"
  
# Указываем какие файлы включать в артефакты (опционально)
artifacts:
  - path: 'dist\*'
    name: Package

# Настройки кэширования (опционально, ускоряет сборки)
cache:
  - '%LOCALAPPDATA%\pip\Cache'
